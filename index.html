<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toporak</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    header, footer {
      background: #111;
      padding: 1rem;
      text-align: center;
    }
    h1, h2, h3 { color: #00e6e6; }
    button {
      margin: 0.3rem;
      padding: 0.5rem 1rem;
      border: none;
      background-color: #0077cc;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover { background-color: #005fa3; }
    input, select, textarea {
      display: block;
      margin: 0.5rem auto;
      padding: 0.5rem;
      width: 90%;
      max-width: 400px;
      border-radius: 4px;
    }
    #series-buttons, #series-content { text-align: center; margin: 1rem; }
    #search-input { margin: 1rem auto; display: block; width: 80%; max-width: 500px; }
    .game-box {
      border: 1px solid #444;
      padding: 1rem;
      margin: 1rem auto;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      background: #2b2b3a;
    }
    #admin-panel { display: none; padding: 1rem; }
    .hidden { display: none; }
    #secret-admin-btn {
      background: transparent;
      color: transparent;
      border: none;
      width: 10px;
      height: 10px;
      position: absolute;
      bottom: 5px;
      right: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  <h1>Toporak</h1>
  <p>2025 yÄ±lÄ±nda yazÄ±lÄ±m ve oyun geliÅŸtirme iÃ§in kuruldu</p>
</header>

<input type="text" id="search-input" placeholder="Oyun veya seri ara..." />

<div id="series-buttons"></div>
<div id="series-content"></div>

<div id="admin-panel">
  <h2>Admin Panel</h2>
  <input type="text" id="new-series" placeholder="Yeni Seri (opsiyonel)" />
  <select id="existing-series">
    <option value="">Seri SeÃ§</option>
  </select>
  <input type="text" id="game-name" placeholder="Oyun AdÄ±" />
  <textarea id="game-note" placeholder="Not / AÃ§Ä±klama"></textarea>
  <input type="url" id="android-link" placeholder="Android Linki" />
  <input type="url" id="ios-link" placeholder="iOS Linki" />
  <input type="url" id="windows-link" placeholder="Windows Linki" />
  <input type="url" id="macos-link" placeholder="macOS Linki" />
  <button onclick="addGame()">Oyun Ekle</button>
</div>

<footer>
  <small>Â© 2025 Toporak</small>
  <button id="secret-admin-btn" onclick="promptAdmin()">Admin</button>
</footer>

<script>
  let isAdmin = false;
  let games = JSON.parse(localStorage.getItem("games") || "[]");

  function saveGames() {
    localStorage.setItem("games", JSON.stringify(games));
  }

  function render() {
    const query = document.getElementById("search-input").value.toLowerCase();
    const seriesList = [...new Set(games.map(g => g.series))];
    const buttons = document.getElementById("series-buttons");
    buttons.innerHTML = "";
    const content = document.getElementById("series-content");
    content.innerHTML = "";

    seriesList.forEach((series, index) => {
      if (query && !series.toLowerCase().includes(query)) return;

      const btn = document.createElement("button");
      btn.innerText = series;
      btn.onclick = () => showSeries(series);
      buttons.appendChild(btn);

      if (isAdmin) {
        const up = document.createElement("button");
        up.innerText = "â¬†";
        up.onclick = () => moveSeries(index, -1);
        buttons.appendChild(up);

        const down = document.createElement("button");
        down.innerText = "â¬‡";
        down.onclick = () => moveSeries(index, 1);
        buttons.appendChild(down);
      }
    });

    updateSeriesSelect();
  }

  function moveSeries(index, direction) {
    const seriesList = [...new Set(games.map(g => g.series))];
    const from = seriesList[index];
    const to = seriesList[index + direction];
    if (!to) return;

    games.forEach(g => {
      if (g.series === from) g.series = "__TEMP__";
      else if (g.series === to) g.series = from;
    });
    games.forEach(g => { if (g.series === "__TEMP__") g.series = to; });
    saveGames();
    render();
  }

  function showSeries(series) {
    const content = document.getElementById("series-content");
    content.innerHTML = `<h2>${series} OyunlarÄ±</h2>`;
    const seriesGames = games.filter(g => g.series === series);

    seriesGames
      .sort((a, b) => new Date(b.date) - new Date(a.date))
      .forEach(g => {
        const div = document.createElement("div");
        div.className = "game-box";
        div.innerHTML = `
          <h3>${g.name}</h3>
          <p>${g.note || "AÃ§Ä±klama yok"}</p>
          <p>ðŸ“… Eklenme: ${g.date}</p>
          <p>
            <a href="${g.android}" target="_blank">Android</a> |
            <a href="${g.ios}" target="_blank">iOS</a> |
            <a href="${g.windows}" target="_blank">Windows</a> |
            <a href="${g.macos}" target="_blank">macOS</a>
          </p>
        `;
        if (isAdmin) {
          const del = document.createElement("button");
          del.innerText = "Sil";
          del.onclick = () => {
            if (confirm("Silmek istediÄŸine emin misin?")) {
              games = games.filter(gg => gg !== g);
              saveGames();
              render();
            }
          };
          div.appendChild(del);
        }
        content.appendChild(div);
      });
  }

  function updateSeriesSelect() {
    const select = document.getElementById("existing-series");
    const unique = [...new Set(games.map(g => g.series))];
    select.innerHTML = `<option value="">Seri SeÃ§</option>`;
    unique.forEach(s => {
      const opt = document.createElement("option");
      opt.value = s;
      opt.innerText = s;
      select.appendChild(opt);
    });
  }

  function addGame() {
    const name = document.getElementById("game-name").value.trim();
    const note = document.getElementById("game-note").value.trim();
    const android = document.getElementById("android-link").value.trim();
    const ios = document.getElementById("ios-link").value.trim();
    const windows = document.getElementById("windows-link").value.trim();
    const macos = document.getElementById("macos-link").value.trim();
    const newSeries = document.getElementById("new-series").value.trim();
    const selectedSeries = document.getElementById("existing-series").value;
    const series = newSeries || selectedSeries;
    const date = new Date().toISOString().split("T")[0];

    if (!series || !name) return alert("Seri ve oyun adÄ± zorunludur.");

    games.push({ name, note, android, ios, windows, macos, series, date });
    saveGames();
    alert("Oyun eklendi!");
    document.querySelectorAll("#admin-panel input, #admin-panel textarea").forEach(el => el.value = "");
    render();
  }

  function promptAdmin() {
    const code = prompt("Admin kodu:");
    if (code === "29042113" || code === "66698688") {
      isAdmin = true;
      document.getElementById("admin-panel").style.display = "block";
      render();
    } else {
      alert("HatalÄ± kod");
    }
  }

  document.getElementById("search-input").addEventListener("input", render);

  render();
</script>
</body>
</html>
